import{r as g,c as r,o as d,a as l,w as o,v as i,F as V,d as I,t as m,j as N,g as k,p as w,s as u,k as x,f as U}from"./myPopup-C2-QI-lh.js";const C={class:"divPage"},O={class:"divSubpage blackPage borderRound"},B={class:"divSubpage blackPage borderRound"},P=["value","min","max"],R=["onClick"],E={__name:"App",setup(J){const s=g([]),v={id:"",name:"",cpf:"",phone:"",balance:"",valid_until:"",notes:""},n=g({...v});async function b(){const t=sessionStorage.getItem("mercado-solidario-families");if(t!=null)s.value=JSON.parse(t);else{const e=await k("/families");e.status==200&&(s.value=e.data,sessionStorage.setItem("mercado-solidario-families",JSON.stringify(e.data)))}}async function S(){const t={newFamily:n.value},e=await w("/families",t);e.status==200?(s.value.push({...n.value}),n.value={...v},sessionStorage.setItem("mercado-solidario-families",JSON.stringify(s.value)),u("Sucesso","Enviou nova família")):u("Erro",e.message)}async function y(t){const a=await x("/families",{id:t});if(a.status==200){for(const p in s.value)s.value[p].id==t&&s.value.splice(p,1);sessionStorage.setItem("mercado-solidario-families",JSON.stringify(s.value)),u("Sucesso","Família deletada")}else u("Erro",a.message)}function f(t){const e=t.target.name;n.value[e]=n.value[e].replace(/[^0-9]/g,"")}function F(t){const e=t.target.name;n.value[e]=n.value[e].replace(/[^a-z0-9]/gi,"").toUpperCase()}return b(),(t,e)=>(d(),r("div",C,[l("div",O,[e[14]||(e[14]=l("h1",null,"Nova família",-1)),l("div",null,[e[7]||(e[7]=l("p",null,"Nome",-1)),o(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.name=a)},null,512),[[i,n.value.name]]),e[8]||(e[8]=l("p",null,"CPF",-1)),o(l("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.cpf=a),name:"cpf",onInput:F},null,544),[[i,n.value.cpf]]),e[9]||(e[9]=l("p",null,"Telefone",-1)),o(l("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.phone=a),name:"phone",onInput:f},null,544),[[i,n.value.phone]]),e[10]||(e[10]=l("p",null,"Saldo",-1)),o(l("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.balance=a),name:"balance",onInput:f},null,544),[[i,n.value.balance]]),e[11]||(e[11]=l("p",null,"Válida até",-1)),o(l("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>n.value.valid_until=a),type:"date"},null,512),[[i,n.value.valid_until]]),e[12]||(e[12]=l("p",null,"Observações",-1)),o(l("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.notes=a)},null,512),[[i,n.value.notes]]),e[13]||(e[13]=l("p",null,null,-1)),l("button",{class:"submitButton borderRound",onClick:e[6]||(e[6]=a=>S())},"Criar")])]),l("div",B,[e[16]||(e[16]=l("h1",null,"Famílias atuais",-1)),(d(!0),r(V,null,I(s.value,a=>(d(),r("div",null,[l("p",null," Responsável: "+m(a.name),1),l("p",null," Saldo: "+m(a.balance),1),l("p",null,[e[15]||(e[15]=N(" Válida até: ",-1)),l("input",{type:"date",value:a.valid_until,min:a.valid_until,max:a.valid_until},null,8,P)]),l("p",null," Observações: "+m(a.notes),1),l("button",{class:"submitButton borderRound",onClick:p=>y(a.id)},"Deletar",8,R)]))),256))])]))}};U(E).mount("#app");
